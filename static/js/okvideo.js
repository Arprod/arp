var player,OKEvents,options;(function(a){var b="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D";a.okvideo=function(d){if(typeof d!=="object"){d={video:d}}var c=this;c.init=function(){c.options=a.extend({},a.okvideo.options,d);if(c.options.video===null){c.options.video=c.options.source}if(OKEvents.utils.isMobile()){a(".player").append('<div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:100%;width:100%;"></div>')}else{if(c.options.adproof){a(".player").append('<div style="position:fixed;left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;" id="okplayer-mask"></div><div id="okplayer" style="position:fixed;left:-25%;top:-25%;overflow:hidden;z-index:-999;height:150%;width:150%;"></div>')}else{a(".player").append('<div style="position:fixed;left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;" id="okplayer-mask"></div><div id="okplayer" style="position:fixed;left:0;top:0;overflow:hidden;z-index:-999;height:100%;width:100%;"></div>')}}a("#okplayer-mask").css("background-image","url("+b+")");c.setOptions();if(c.options.playlist.list===null){if(c.options.video.provider==="youtube"){c.loadYouTubeAPI()}else{if(c.options.video.provider==="vimeo"){c.options.volume/=100;c.loadVimeoAPI()}}}else{c.loadYouTubeAPI()}};c.setOptions=function(){for(var e in this.options){if(this.options[e]==true){this.options[e]=1}if(this.options[e]==false){this.options[e]=3}}if(c.options.playlist.list===null){c.options.video=c.determineProvider()}a(window).data("okoptions",c.options)};c.loadYouTubeAPI=function(e){c.insertJS("http://www.youtube.com/player_api")};c.loadYouTubePlaylist=function(){player.loadPlaylist(c.options.playlist.list,c.options.playlist.index,c.options.playlist.startSeconds,c.options.playlist.suggestedQuality)};c.loadVimeoAPI=function(){a("#okplayer").replaceWith(function(){return'<iframe src="http://player.vimeo.com/video/'+c.options.video.id+"?api=1&js_api=1&title=0&byline=0&portrait=0&playbar=0&loop="+c.options.loop+'&autoplay=1&player_id=okplayer" frameborder="0" style="'+a(this).attr("style")+'visibility:hidden;background-color:black;" id="'+a(this).attr("id")+'"></iframe>'});c.insertJS("static/js/froogaloop2.min.js",function(){vimeoPlayerReady()})};c.insertJS=function(g,e){var h=document.createElement("script");if(e){if(h.readyState){h.onreadystatechange=function(){if(h.readyState==="loaded"||h.readyState==="complete"){h.onreadystatechange=null;e()}}}else{h.onload=function(){e()}}}h.src=g;var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(h,f)};c.determineProvider=function(){var e=document.createElement("a");e.href=c.options.video;if(/youtube.com/.test(c.options.video)){return{provider:"youtube",id:e.href.slice(e.href.indexOf("v=")+2).toString()}}else{if(/vimeo.com/.test(c.options.video)){return{provider:"vimeo",id:e.href.split("/")[3].toString()}}else{if(/[A-Za-z0-9_]+/.test(c.options.video)){var g=new String(c.options.video.match(/[A-Za-z0-9_]+/));if(g.length==11){return{provider:"youtube",id:g.toString()}}else{for(var f=0;f<c.options.video.length;f++){if(typeof parseInt(c.options.video[f])!=="number"){throw"not vimeo but thought it was for a sec"}}return{provider:"vimeo",id:c.options.video}}}else{throw"OKVideo: Invalid video source"}}}};c.init()};a.okvideo.options={source:null,video:null,playlist:{list:null,index:0,startSeconds:0,suggestedQuality:"default"},disableKeyControl:1,captions:0,loop:1,hd:1,volume:0,adproof:false,unstarted:null,onFinished:null,onReady:null,onPlay:null,onPause:null,buffering:null,annotations:true,cued:null};a.fn.okvideo=function(c){return this.each(function(){(new a.okvideo(c))})}})(jQuery);function vimeoPlayerReady(){options=$(window).data("okoptions");var a=$("#okplayer")[0];player=$f(a);window.setTimeout(function(){$("#okplayer").css("visibility","visible")},2000);player.addEvent("ready",function(){OKEvents.v.onReady();player.api("play");if(OKEvents.utils.isMobile()){OKEvents.v.onPlay()}else{player.addEvent("play",OKEvents.v.onPlay);player.addEvent("pause",OKEvents.v.onPause);player.addEvent("finish",OKEvents.v.onFinish)}})}function onYouTubePlayerAPIReady(){options=$(window).data("okoptions");player=new YT.Player("okplayer",{videoId:options.video?options.video.id:null,playerVars:{autohide:1,autoplay:1,disablekb:options.keyControls,cc_load_policy:options.captions,controls:0,enablejsapi:1,fs:0,modestbranding:1,iv_load_policy:options.annotations,loop:options.loop,showinfo:0,rel:0,wmode:"opaque",hd:options.hd},events:{onReady:OKEvents.yt.ready,onStateChange:OKEvents.yt.onStateChange,onError:OKEvents.yt.error}})}OKEvents={yt:{ready:function(a){a.target.setVolume(options.volume);if(options.playlist.list){player.loadPlaylist(options.playlist.list,options.playlist.index,options.playlist.startSeconds,options.playlist.suggestedQuality)}else{a.target.playVideo()}OKEvents.utils.isFunction(options.onReady)&&options.onReady()},onStateChange:function(a){switch(a.data){case -1:OKEvents.utils.isFunction(options.unstarted)&&options.unstarted();break;case 0:OKEvents.utils.isFunction(options.onFinished)&&options.onFinished();options.loop&&a.target.playVideo();break;case 1:OKEvents.utils.isFunction(options.onPlay)&&options.onPlay();break;case 2:OKEvents.utils.isFunction(options.onPause)&&options.onPause();break;case 3:OKEvents.utils.isFunction(options.buffering)&&options.buffering();break;case 5:OKEvents.utils.isFunction(options.cued)&&options.cued();break;default:throw"OKVideo: received invalid data from YT player."}},error:function(a){throw a}},v:{onReady:function(){OKEvents.utils.isFunction(options.onReady)&&options.onReady()},onPlay:function(){if(!OKEvents.utils.isMobile()){player.api("api_setVolume",options.volume)}OKEvents.utils.isFunction(options.onPlay)&&options.onPlay()},onPause:function(){OKEvents.utils.isFunction(options.onPause)&&options.onPause()},onFinish:function(){OKEvents.utils.isFunction(options.onFinish)&&options.onFinish()}},utils:{isFunction:function(a){if(typeof a==="function"){return true}else{return false}},isMobile:function(){if(navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)){return true}else{return false}}}};